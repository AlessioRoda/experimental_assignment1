# Cluedo simulation for the Experimental Robotics Lab course, Alessio Roda S4458313
The purpose of this repository is to create a simulation for the Clued game in which the robot moves in four different positions to get the required hints
to obtain the game solution. The hints are generated when the cluedo_link in the robot arm reaches the marker corresponding to the position that it reached; 
the marker is not reachable from the robot itself, but the arm is. The received hints may generate complete and consistent hypotheses that are used as 
possible solutions for the cluedo game; if the right solution is found the game ends, otherwhise the robot continues movieng in the four positions available.


## Description of the architecture

![cluedo](https://user-images.githubusercontent.com/48511957/142238407-b648df07-2806-474c-a22e-d787d1638970.jpg)

The architecture is divided into two packages:
* erl2: the main package of the architecture: it provides all the code for simulating the cluedo game and all the noes to interact with the ARMOR service and to manage the ROSPlan behaviour
* moveit_config: the package generated with the Moveit setup assistant for generating all the packages that allow to control the motion of the arm

Inside the erl2 folder you can find:
* action folder containing the Move.action file for generating the corresponding action message
* config folder containing the configuration files for the Rviz simulation and the motor controllers
* docs folder with the sphinx code documentation (to visualize use docs/_build/html/index.html)
* launch folder in which there are the launch files for running all the nodes of the simulation
* msg folder containing the ErlOracle.msg for defining the hint messages
* PDDL folder containing the domai.pdl and problem.pddl files that descrives respectively the domain and the problem of the cluedo simulaiton
* scripts folder containing the go_to_point.py script to implement a simple behavioiur for moving the the robot from a position to another in the simulation, the ontology_interface.py script to manage the queries for the ARMOR ontology and the reset_planner.py script that manages the ROSPlan behaviour, dispatching the problem until a solution is found. It also contains a sub folder with the MyArmor and Planner classes.
* src folder with the init.cpp file that allows to move the robotic armi in the initial configuration and the check_consistency.cpp, goToWaypoint.cpp and movearm.cpp files that represent the Action Interfaces nodes for performing the actions described in the PDDL doamin file. The folder also contains the simulaiton.cpp file that manages the simulaion node for generating the hints when a marker is reached with the arm 
* srv folder with all the service custom messages
* urdf folder with the robot.urdf description file for the simulation
* world folder containing the world description of the simulation
* cluedo_ontology.owl that describes the initial ontology
* launch_simulation.sh for launching all the launch files simultaneously

Concerning the aruco_ros and moveit_config packages only small changes have been performed to change the default Gazebo simulation environment, generated by the setup assistant, to the new simulation environment provided for the Cluedo game.

### Component diagram
![diagrama](https://user-images.githubusercontent.com/48511957/193607102-b42e262c-09f4-4b76-aec0-c280b9c684d0.png)

