# Cluedo simulation for the Experimental Robotics Lab course, Alessio Roda S4458313

The purpose of this repository is to generate a simulation for the Cluedo game, in which the robot moves from a room to another in the Gazebo simulation, searches for ArUco markers that provide the hints to determine who is the murder and tries to provide a solution basing on the collected hints, untill the correct solution is found. The scenario in which the robot moves is composed by six different rooms in which there are five ArUco markers; the robot is able to move in the environment mapping it with the laser_scan that is mounted on its basis in order to generate a global map of the area. Also the robot has a manipulator in which is mounted a camera on the end effector that is needed to detect the markers: the robot continously moves the arm in order to visualize all the markers in the room, since they are in not defined position and orientations.


## Description of the architecture

![cluedo](https://user-images.githubusercontent.com/48511957/142238407-b648df07-2806-474c-a22e-d787d1638970.jpg)

The architecture is divided into four packages:
* aruco_ros: the package already provided to recognize the ArUco markers from the camera images
* erl2: the main package of the architecture: it provides the FSM that manages the behaviour of the robot, the node to interface with the ARMOR ontology and the node to perform the movement of the robotic arm needed to detect the markers
* exp_assignment3: package already porvided for the simulation
* moveit_config: the package generated with the Moveit setup assistant for generating all the packages that allow to control the motion of the arm

Concerning the aruco_ros and moveit_config packages only small modifications have beed done: for the first one a publisher of the marker ID has been added inside aruco_ros/aruco_ros/marker_publish.cpp, instad in the second one some small changes were neeeded to change the default Gazebo simulation environmet, generated by the setup assistant, to the new simulation environment provided for the Cluedo game.

Inside the erl2 folder you can find:
* config folder containing the configuration files for the Rviz simulation and the motor controllers
* launch folder in which there are the launch files for runnig all the nodes of the simulation
* msg folder containig the ErlOracle.msg for defining the hint message generated by the final_oracle node in the exp_assignemtn3 folder
* param folder containing all the parameters required for the SLAM gmapping
* spripts folder containig the ontology_interface.py script to manage the queries for the ARMOR ontology and the state_machine.py script to manage the SMACH state machine that represents the behaviour of the robot during the simualtion. It als contains a sub folder with the MyArmor and Place classes.
* src folder with the movearm.cpp file that porvides the node that manages the motion of the robotic arm
* srv folder with all the service custom messages
* urdf folder with the robot.urdf description file for the simulation
* world folder containing the world description of the simulation
* cluedo_ontology.owl that describes the initial ontology
* launch_simulation.sh for launching all the launch files simulatneously

The exp_assignment3 has't been modified 

### Component diagram




